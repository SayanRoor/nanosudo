# Brevo Email Configuration

## ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

### –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env.local`:

```bash
BREVO_API_KEY="xkeysib-xxxxx...xxxxx"  # Your Brevo API key from dashboard
NEXT_PUBLIC_BREVO_SENDER_EMAIL="noreply@nanosudo.com"
BREVO_NOTIFICATION_EMAIL="roorrsayann@gmail.com"
```

> **Note**: API –∫–ª—é—á —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º `.env.local` —Ñ–∞–π–ª–µ

## üìß –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### –î–≤–µ —Ñ–æ—Ä–º—ã –±—Ä–∏—Ñ–∞:
1. **–ü–æ–ª–Ω–∞—è —Ñ–æ—Ä–º–∞** - API: `/api/brief` (4 —à–∞–≥–∞, —Å PDF –æ—Ç—á–µ—Ç–æ–º)
2. **–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞** - API: `/api/brief-simple` (3 —à–∞–≥–∞, —Ç–µ–∫—É—â–∞—è)

### –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —É–ø—Ä–æ—â–µ–Ω–Ω–æ–≥–æ –±—Ä–∏—Ñ–∞:

1. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É** (`roorrsayann@gmail.com`):
   - –¢–µ–º–∞: "–ù–æ–≤—ã–π –±—Ä–∏—Ñ (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–π): [–¢–∏–ø –ø—Ä–æ–µ–∫—Ç–∞]"
   - –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ: –í—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ —Ñ–æ—Ä–º—ã (—Ç–∏–ø –ø—Ä–æ–µ–∫—Ç–∞, –æ–ø–∏—Å–∞–Ω–∏–µ, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã, –∫–æ–Ω—Ç–∞–∫—Ç—ã)
   - Reply-To: Email –∫–ª–∏–µ–Ω—Ç–∞ (–¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ—Ç–≤–µ—Ç–∞)

2. **–ö–ª–∏–µ–Ω—Ç—É** (Email —É–∫–∞–∑–∞–Ω–Ω—ã–π –≤ —Ñ–æ—Ä–º–µ):
   - –¢–µ–º–∞: "–ü–æ–ª—É—á–∏–ª–∏ –≤–∞—à –±—Ä–∏—Ñ ‚Äî —Å–ø–∞—Å–∏–±–æ!"
   - –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞—è–≤–∫–∏ —Å –æ–±–µ—â–∞–Ω–∏–µ–º –æ—Ç–≤–µ—Ç–∞ –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–æ:
```bash
pnpm dev
# –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ http://localhost:3000/brief
# –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å
```

### Production:
```bash
# –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ Vercel:
# Settings ‚Üí Environment Variables
BREVO_API_KEY=...
NEXT_PUBLIC_BREVO_SENDER_EMAIL=...
BREVO_NOTIFICATION_EMAIL=...
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏

### API endpoints:
- **–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞**: `POST /api/brief-simple` (`src/app/api/brief-simple/route.ts`)
- **–ü–æ–ª–Ω–∞—è —Ñ–æ—Ä–º–∞**: `POST /api/brief` (`src/app/api/brief/route.ts`)

### –õ–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞):
1. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (Zod schema `briefSimpleSchema`)
2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Supabase (`brief_simple_submissions` table)
3. **–û—Ç–ø—Ä–∞–≤–∫–∞ 2 email** —á–µ—Ä–µ–∑ Brevo API:
   - –ê–¥–º–∏–Ω—É: —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –∏–∑ —Ñ–æ—Ä–º—ã
   - –ö–ª–∏–µ–Ω—Ç—É: —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
4. –í–æ–∑–≤—Ä–∞—Ç `submissionId` –∫–ª–∏–µ–Ω—Ç—É

### –õ–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ (–ø–æ–ª–Ω–∞—è —Ñ–æ—Ä–º–∞):
1. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (Zod schema)
2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Supabase (`submissions` table)
3. –ó–∞–≥—Ä—É–∑–∫–∞ brandbook —Ñ–∞–π–ª–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å) –≤ Supabase Storage
4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF –æ—Ç—á–µ—Ç–∞
5. **–û—Ç–ø—Ä–∞–≤–∫–∞ 2 email** —á–µ—Ä–µ–∑ Brevo API:
   - –ê–¥–º–∏–Ω—É: —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π + PDF –≤–ª–æ–∂–µ–Ω–∏–µ
   - –ö–ª–∏–µ–Ω—Ç—É: —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º + PDF –≤–ª–æ–∂–µ–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤ Brevo Dashboard:
- URL: https://app.brevo.com
- Statistics ‚Üí Transactional ‚Üí Email logs
- –°–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç—É—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ (Sent/Delivered/Opened)

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

1. **E2E_TEST_MODE**: –í —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ email –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
2. **Promise.allSettled**: Email –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ, –æ—à–∏–±–∫–∞ –æ–¥–Ω–æ–≥–æ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –¥—Ä—É–≥–æ–π
3. **Fallback**: –ï—Å–ª–∏ `BREVO_NOTIFICATION_EMAIL` –Ω–µ —É–∫–∞–∑–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `contactEmail` –∏–∑ —Ñ–æ—Ä–º—ã

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞ (`brief_simple_submissions`):
**–®–∞–≥ 1 - –¢–∏–ø –ø—Ä–æ–µ–∫—Ç–∞:**
- `project_type`: landing | corporate | ecommerce | service | mvp
- `description`: –¢–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
- `has_examples`, `examples_urls`: –°—Å—ã–ª–∫–∏ –Ω–∞ –ø—Ä–∏–º–µ—Ä—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–®–∞–≥ 2 - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã:**
- `main_goal`: sales | leads | awareness | automation
- `budget_clarity`: exact | approximate | no_idea
- `timeline`: urgent | normal | flexible
- `has_design`, `has_content`, `has_domain`: –ß—Ç–æ —É–∂–µ –µ—Å—Ç—å —É –∫–ª–∏–µ–Ω—Ç–∞

**–®–∞–≥ 3 - –ö–æ–Ω—Ç–∞–∫—Ç—ã:**
- `name`, `email`, `phone` (optional), `company` (optional)
- `preferred_contact`: whatsapp | telegram | email | phone

### –ü–æ–ª–Ω–∞—è —Ñ–æ—Ä–º–∞ (`submissions`):
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–µ (–Ω–∞–∑–≤–∞–Ω–∏–µ, –∏–Ω–¥—É—Å—Ç—Ä–∏—è, –≥–µ–æ–≥—Ä–∞—Ñ–∏—è)
- –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è –∏ –∫–∞–Ω–∞–ª—ã
- KPI –∏ –º–µ—Ç—Ä–∏–∫–∏
- –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- Brandbook (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è:
- UUID –¥–ª—è submission
- Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–æ–±–µ —Ñ–æ—Ä–º—ã)
- PDF –æ—Ç—á–µ—Ç (—Ç–æ–ª—å–∫–æ –ø–æ–ª–Ω–∞—è —Ñ–æ—Ä–º–∞)

## üîß Troubleshooting

### Email –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API key –≤ `.env.local`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤ Brevo Dashboard
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å spam/junk folder
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `pnpm dev` –ø–æ–∫–∞–∂–µ—Ç –æ—à–∏–±–∫–∏ API

### –û—à–∏–±–∫–∞ "BREVO_API_KEY is not configured":
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –≤ `.env.local`
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å dev —Å–µ—Ä–≤–µ—Ä

### PDF –Ω–µ –ø—Ä–∏–∫—Ä–µ–ø–ª—è–µ—Ç—Å—è:
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é: `src/server/pdf/brief-report.ts`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å base64 encoding
